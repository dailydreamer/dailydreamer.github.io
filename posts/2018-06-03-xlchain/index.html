<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="dailydreamer的小空间">


<link rel="shortcut icon" href="/images/avatar.jpg" />

<meta name="keywords" content="Fabrication and Prototyping, 3D Print, Laser Cut">
<title>XLChain</title>

<link href="/index.xml" rel="alternate" type="application/rss+xml" title="dailydreamer" />
<link href="/index.xml" rel="feed" type="application/rss+xml" title="dailydreamer" />

<link href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.5.0/css/bulma.min.css" rel="stylesheet" type="text/css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="/css/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML">
</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-75912368-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
  <nav class="nav has-shadow">
  <div class="nav-left">
    <span id="toggle__menu" class="nav-toggle">
      <span></span>
      <span></span>
      <span></span>
    </span>
    <a href="/index.html" class="nav-item">Dailydreamer's Space</a>
  </div>

  <div class="nav-center">
    <a class="nav-item" href="https://github.com/dailydreamer">
      <span class="icon">
        <i class="fa fa-github"></i>
      </span>
    </a>
    <a class="nav-item" href="https://www.linkedin.com/in/dailydreamer/">
      <span class="icon">
        <i class="fa fa-linkedin-square" aria-hidden="true"></i>        
      </span>
    </a>
    <a class="nav-item" href="/index.xml" type="application/rss+xml">
      <span class="icon">
        <i class="fa fa-rss"></i>
      </span>
    </a>
  </div>
</nav>      

  <div id="container">
    <aside>
  <nav class="sidebar">
    <div id="tags__ul">
      <a id="all_posts" class="tag is-rounded is-primary">
        全部 
        <span class="tag-count">38</span>
      </a>
      
      <a id="编程" class="tag is-rounded">
        编程 
        <span class="tag-count">17</span>
      </a>
      
      <a id="读书笔记" class="tag is-rounded">
        读书笔记 
        <span class="tag-count">17</span>
      </a>
      
      <a id="项目" class="tag is-rounded">
        项目 
        <span class="tag-count">6</span>
      </a>
      
      <a id="web" class="tag is-rounded">
        web 
        <span class="tag-count">5</span>
      </a>
      
      <a id="产品" class="tag is-rounded">
        产品 
        <span class="tag-count">5</span>
      </a>
      
      <a id="哲学" class="tag is-rounded">
        哲学 
        <span class="tag-count">4</span>
      </a>
      
      <a id="心理学" class="tag is-rounded">
        心理学 
        <span class="tag-count">4</span>
      </a>
      
      <a id="科学" class="tag is-rounded">
        科学 
        <span class="tag-count">4</span>
      </a>
      
      <a id="编程语言" class="tag is-rounded">
        编程语言 
        <span class="tag-count">4</span>
      </a>
      
      <a id="ai" class="tag is-rounded">
        ai 
        <span class="tag-count">1</span>
      </a>
      
      <a id="机器人" class="tag is-rounded">
        机器人 
        <span class="tag-count">1</span>
      </a>
      
      <a id="架构" class="tag is-rounded">
        架构 
        <span class="tag-count">1</span>
      </a>
      
      <a id="理财" class="tag is-rounded">
        理财 
        <span class="tag-count">1</span>
      </a>
      
      <a id="设计" class="tag is-rounded">
        设计 
        <span class="tag-count">1</span>
      </a>
      
    </div>

    <div class="menu">
      <ul id="posts__ul" class="menu-list">
        
        
        
        
        <li class="all_posts 读书笔记 哲学 科学">
          <a href="https://dailydreamer.me/posts/2021-10-24-the-minds-i/">
            <span class="posts-title">探秘意识 - 读《我是谁或什么》</span>
            <span class="posts-date">Oct, 2021</span>
          </a>
        </li>
        
        
        
        <li class="all_posts ai 架构">
          <a href="https://dailydreamer.me/posts/2020-02-29-large-scale-model-training/">
            <span class="posts-title">大规模模型训练</span>
            <span class="posts-date">Feb, 2020</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程">
          <a href="https://dailydreamer.me/posts/2019-10-10-nfs-config/">
            <span class="posts-title">如何配置NFS</span>
            <span class="posts-date">Oct, 2019</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 编程语言">
          <a href="https://dailydreamer.me/posts/2018-11-25-python-concurrency/">
            <span class="posts-title">Python 并发模型</span>
            <span class="posts-date">Nov, 2018</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记">
          <a href="https://dailydreamer.me/posts/2018-11-20-lessons-of-history/">
            <span class="posts-title">历史的教训</span>
            <span class="posts-date">Nov, 2018</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 心理学">
          <a href="https://dailydreamer.me/posts/2018-07-13-poor-charlie/">
            <span class="posts-title">穷查理宝典</span>
            <span class="posts-date">Jul, 2018</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 心理学">
          <a href="https://dailydreamer.me/posts/2018-06-13-principles/">
            <span class="posts-title">原则</span>
            <span class="posts-date">Jun, 2018</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 项目 产品">
          <a href="https://dailydreamer.me/posts/2018-06-13-apparel-sales-prediction/">
            <span class="posts-title">智慧服装</span>
            <span class="posts-date">Jun, 2018</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 项目">
          <a href="https://dailydreamer.me/posts/2018-06-03-xlchain/">
            <span class="posts-title">XLChain</span>
            <span class="posts-date">Jun, 2018</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 项目 机器人">
          <a href="https://dailydreamer.me/posts/2018-01-28-foodgo-autonomous-food-delivery/">
            <span class="posts-title">FoodGo, 层级式的配送小车</span>
            <span class="posts-date">Jan, 2018</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 产品 项目">
          <a href="https://dailydreamer.me/posts/2018-01-09-past-failed-experiences/">
            <span class="posts-title">过去失败的创业尝试</span>
            <span class="posts-date">Jan, 2018</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 项目 产品">
          <a href="https://dailydreamer.me/posts/2017-12-05-nutriment/">
            <span class="posts-title">Nutriment</span>
            <span class="posts-date">Dec, 2017</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 科学 哲学">
          <a href="https://dailydreamer.me/posts/2017-08-26-the-grand-design/">
            <span class="posts-title">大设计</span>
            <span class="posts-date">Aug, 2017</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 科学">
          <a href="https://dailydreamer.me/posts/2017-08-07-a-new-kind-of-science-2/">
            <span class="posts-title">一种新科学(2)</span>
            <span class="posts-date">Aug, 2017</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 项目 心理学">
          <a href="https://dailydreamer.me/posts/2017-05-21-gamification/">
            <span class="posts-title">游戏化 Gamification</span>
            <span class="posts-date">May, 2017</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 产品">
          <a href="https://dailydreamer.me/posts/2016-06-16-mobile-application-experience/">
            <span class="posts-title">移动端体验</span>
            <span class="posts-date">Jun, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 理财">
          <a href="https://dailydreamer.me/posts/2016-06-15-fund-tips/">
            <span class="posts-title">买基金给我加薪</span>
            <span class="posts-date">Jun, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 编程语言">
          <a href="https://dailydreamer.me/posts/2016-06-09-inspired-by-functional-programing-language/">
            <span class="posts-title">从函数式语言想到的</span>
            <span class="posts-date">Jun, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 web">
          <a href="https://dailydreamer.me/posts/2016-05-25-webrtc-introduction/">
            <span class="posts-title">WebRTC简介</span>
            <span class="posts-date">May, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 设计">
          <a href="https://dailydreamer.me/posts/2016-05-24-some-design-books/">
            <span class="posts-title">读过的一些设计书籍</span>
            <span class="posts-date">May, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 web">
          <a href="https://dailydreamer.me/posts/2016-04-25-dom-and-dom-event/">
            <span class="posts-title">DOM和DOM Event</span>
            <span class="posts-date">Apr, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 web">
          <a href="https://dailydreamer.me/posts/2016-04-14-css-cheat-sheet/">
            <span class="posts-title">CSS Cheat Sheet</span>
            <span class="posts-date">Apr, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 web">
          <a href="https://dailydreamer.me/posts/2016-04-09-spa-jwt-auth/">
            <span class="posts-title">单页应用JWT身份认证</span>
            <span class="posts-date">Apr, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 web">
          <a href="https://dailydreamer.me/posts/2016-04-08-cors-solve-same-origin-policy-problem/">
            <span class="posts-title">CORS解决单页应用跨域问题</span>
            <span class="posts-date">Apr, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 科学">
          <a href="https://dailydreamer.me/posts/2016-03-20-a-new-kind-of-science/">
            <span class="posts-title">一种新科学</span>
            <span class="posts-date">Mar, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 心理学">
          <a href="https://dailydreamer.me/posts/2016-03-07-difficult-conversation/">
            <span class="posts-title">关键对话</span>
            <span class="posts-date">Mar, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 哲学">
          <a href="https://dailydreamer.me/posts/2016-01-13-power-of-myth/">
            <span class="posts-title">神话的力量</span>
            <span class="posts-date">Jan, 2016</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程">
          <a href="https://dailydreamer.me/posts/2015-11-23-meet-ctf/">
            <span class="posts-title">一次与CTF的邂逅</span>
            <span class="posts-date">Nov, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程">
          <a href="https://dailydreamer.me/posts/2015-10-30-ssh-config/">
            <span class="posts-title">多个github账号的ssh key切换</span>
            <span class="posts-date">Oct, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 哲学">
          <a href="https://dailydreamer.me/posts/2015-08-04-zen-and-the-art-of-motorcycle-maintenance/">
            <span class="posts-title">禅与摩托车维修的艺术</span>
            <span class="posts-date">Aug, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 产品">
          <a href="https://dailydreamer.me/posts/2015-07-25-product-manager/">
            <span class="posts-title">人人都是产品经理</span>
            <span class="posts-date">Jul, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 编程语言">
          <a href="https://dailydreamer.me/posts/2015-06-29-hiding-mouse-globally-in-wpf/">
            <span class="posts-title">WPF全局隐藏鼠标</span>
            <span class="posts-date">Jun, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 编程">
          <a href="https://dailydreamer.me/posts/2015-06-28-unix-programming-art/">
            <span class="posts-title">UNIX编程艺术</span>
            <span class="posts-date">Jun, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程 编程语言">
          <a href="https://dailydreamer.me/posts/2015-06-23-python-yeild-and-parse-xml/">
            <span class="posts-title">Python解析XML与生成迭代器</span>
            <span class="posts-date">Jun, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程">
          <a href="https://dailydreamer.me/posts/2015-06-22-elasticsearch-config-2/">
            <span class="posts-title">ElasticSearch搜索配置（2）</span>
            <span class="posts-date">Jun, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程">
          <a href="https://dailydreamer.me/posts/2015-06-05-elasticsearch-config-1/">
            <span class="posts-title">ElasticSearch搜索配置（1）</span>
            <span class="posts-date">Jun, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 读书笔记 编程">
          <a href="https://dailydreamer.me/posts/2015-06-04-a-pragmatic-programmer/">
            <span class="posts-title">程序员修炼之道</span>
            <span class="posts-date">Jun, 2015</span>
          </a>
        </li>
        
        
        
        <li class="all_posts 编程">
          <a href="https://dailydreamer.me/posts/2015-06-02-config-elasticsearch-on-aws/">
            <span class="posts-title">在AWS上配置ElasticSearch</span>
            <span class="posts-date">Jun, 2015</span>
          </a>
        </li>
        
        
      </ul>
    </div>
  </nav>
</aside>
    <article>
      <div class="content post">
        <h1 data-identifier="2018-06-03">
          XLChain
          <span class="posts-date">Jun, 2018</span> 
        </h1>       
        <div class="tags">
          
          <span class="tag is-medium" style="margin-left:0">项目</span>
          
        </div>
        <!-- raw HTML omitted -->
<h2 id="overview">Overview</h2>
<p>This is a course project of our Fabrication and Physical Prototyping course, implemented by Xincheng Li and Chengxi Xia. Blockchain is a hot topic recently, but only very few people know the theory behind it. This project want to introduce the simple mechanism of blockchain leveraging the tangible object interaction, under the constraint of the course requirement.</p>
<p><img src="/images/2018-06-03-xlchain/xlchain.jpg" alt="XLCahin">
<em>XLCahin</em></p>
<p>We&rsquo;ve already seen some interesting visualization about blockchain, like <a href="http://ethviewer.live/">ethviewer</a>, etc. Though it is inspiring to see these digital visualization, tangible visualization would be more fun to play with, thus easy to accept by broader range of people, especially young children.</p>
<p>Our initial thought was to use the resource we have at makerspace to show some basic consensus algorithm using in blockchain technology. Limited to the course constraint, we narrow down the scope to a scenario that only show the abstract level of blockchain information convey mechanism, which is how one block transfer information to another one.</p>
<p>The finished video is as below.</p>
<!-- raw HTML omitted -->
<h2 id="implementation">Implementation</h2>
<p>The system block diagram is shown as below.
<img src="/images/2018-06-03-xlchain/block_diagram.png" alt="Block Diagram">
<em>Block Diagram</em></p>
<p>Two parts we have are two blocks and the base. As can be seen in the video, the chain on base is originally white LED state, and the start block is green LED state, while the end block is white LED state. When two blocks are put on to the base, RFID tag in the start block will be read by the RFID reader in the base. Then the chain on the base will start to shine green LED one by one, and finally after 5 rounds show green LED state on the whole chain. When the green LED at the end of chain lights on, the light sensor in the end block will sense that, which will trigger the end block to green LED state.</p>
<p>The detail implementation method will be shown in the Appendix separately.</p>
<ul>
<li><a href="#detail-of-blocks-made-by-xincheng">Detail of blocks made by Xincheng</a></li>
<li><a href="#detail-of-base-made-by-chengxi">Detail of base made by Chengxi</a></li>
</ul>
<h2 id="reflection">Reflection</h2>
<p>In the process of implementing it, we learn all sorts of new things. From the beginning we have no clue how to fasten the PCB board on the base and how to tie the two boards without glue, we learn step by step from trial and error lots of versions to the final one. And we have several experiences to share.</p>
<ol>
<li><strong>Measure is the first and very important step.</strong>
With an accurate measure and computing, a lot of time can be saved later. Sometimes when we use Rhino, we hope there is a system that can set some variable so that we can manage the dependence of all measurement very easily, instead of re compute and redraw all of the shape after changing one component.</li>
<li><strong>Physical world never works as smoothly as digital world.</strong>
This is about fit test, one of the most time consuming part of the project. Only after laser cutting an acrylic board, can you find that laser has its dimension (about 1.5 mm diameter for our Universe laser cut machine) instead of the no dimension point in the digital world. So we tried lots of times to make two acrylic board fits without using an glue. And we even use two dimensions of cutting piece for block to make most of them fit very tight and only top of it fits a little loosely, so that it can be move out easier.</li>
<li><strong>Spray painting needs the mold fit the board very tight</strong>. Otherwise the paint will go to any space it can find and the figure will be blur.</li>
</ol>
<p>Though lots of work have been put into this project. It&rsquo;s still fun to make something by your hand and see it working. This project is very preliminarily in the way of tangible visualization of blockchain consensus algorithm. We believe with more projects like this, we can make the theory behind the scene more accessible to broader populations.</p>
<h2 id="appendix">Appendix</h2>
<h3 id="detail-of-blocks-made-by-xincheng">Detail of blocks made by Xincheng</h3>
<p><strong>Hardware</strong></p>
<p><img src="/images/2018-06-03-xlchain/block0.jpg" alt="Block">
<em>Block</em></p>
<p><img src="/images/2018-06-03-xlchain/block1.jpg" alt="Block inside">
<em>Block inside</em></p>
<p><img src="/images/2018-06-03-xlchain/block2.jpg" alt="Light guide">
<em>Light guide</em></p>
<p><img src="/images/2018-06-03-xlchain/block3.jpg" alt="Block inside">
<em>Block inside</em></p>
<p><img src="/images/2018-06-03-xlchain/block4.jpg" alt="Fasten board">
<em>Fasten board</em></p>
<p><strong>Software</strong></p>
<p><img src="/images/2018-06-03-xlchain/startblock_board.png" alt="Startblock Schematics Layouts">
<em>Startblock Schematics Layouts</em></p>
<p><img src="/images/2018-06-03-xlchain/endblock_board.png" alt="Endblock Schematics Layouts">
<em>Endblock Schematics Layouts</em></p>
<p>Arduino code of start block. It just lights on the green LED all the time.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;Adafruit_NeoPixel.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> LED <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> GND <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;

<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> NUMPIXELS <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
Adafruit_NeoPixel pixels <span style="color:#f92672">=</span> Adafruit_NeoPixel(NUMPIXELS, LED, NEO_GRB <span style="color:#f92672">+</span> NEO_KHZ800);

<span style="color:#75715e">// the setup routine runs once when you press reset:
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
  <span style="color:#75715e">// init digital ground
</span><span style="color:#75715e"></span>  pinMode(GND, OUTPUT);
  digitalWrite(GND, LOW);
  <span style="color:#75715e">// initialize the digital pin as an output.
</span><span style="color:#75715e"></span>  pinMode(LED, OUTPUT);
  pixels.begin();
  showGreenLED(); 
}

<span style="color:#75715e">// the loop routine runs over and over again forever:
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() { 
}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">showGreenLED</span>() {
    pixels.setPixelColor(<span style="color:#ae81ff">0</span>, pixels.Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">150</span>,<span style="color:#ae81ff">0</span>)); <span style="color:#75715e">// Moderately bright green color.
</span><span style="color:#75715e"></span>    pixels.show(); <span style="color:#75715e">// This sends the updated pixel color to the hardware.
</span><span style="color:#75715e"></span>}
</code></pre></div><p>Arduino code of end block. It is the white LED state initially. When the light sensor sense the LED on the chain lights on, it will become the same green LED as the start block.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;Adafruit_NeoPixel.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> LASERSENSOR <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> LED <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> GND0 <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> GND1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> USB <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
<span style="color:#66d9ef">int</span> SensorReading <span style="color:#f92672">=</span> HIGH;

<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> NUMPIXELS <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
Adafruit_NeoPixel pixels <span style="color:#f92672">=</span> Adafruit_NeoPixel(NUMPIXELS, LED, NEO_GRB <span style="color:#f92672">+</span> NEO_KHZ800);

<span style="color:#75715e">// the setup routine runs once when you press reset:
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
  <span style="color:#75715e">// set up digital ground and 5v
</span><span style="color:#75715e"></span>  pinMode(GND0, OUTPUT);
  pinMode(GND1, OUTPUT);
  pinMode(USB, OUTPUT);
  digitalWrite(GND0, LOW);
  digitalWrite(GND1, LOW);
  digitalWrite(USB, HIGH);
  <span style="color:#75715e">// initialize the digital pin as an output.
</span><span style="color:#75715e"></span>  pinMode(LED, OUTPUT);
  pinMode(LASERSENSOR, INPUT);
  pixels.begin();
}

<span style="color:#75715e">// the loop routine runs over and over again forever:
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() {
  SensorReading <span style="color:#f92672">=</span> digitalRead(LASERSENSOR);
  <span style="color:#66d9ef">if</span>(SensorReading <span style="color:#f92672">==</span> LOW) {  <span style="color:#75715e">// init status
</span><span style="color:#75715e"></span>    showWhiteLED();                        
  } <span style="color:#66d9ef">else</span> {  <span style="color:#75715e">// when chain pass through
</span><span style="color:#75715e"></span>    showGreenLED();                    
  }
}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">showWhiteLED</span>() {
    pixels.setPixelColor(<span style="color:#ae81ff">0</span>, pixels.Color(<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">255</span>,<span style="color:#ae81ff">255</span>)); 
    pixels.show();
}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">showGreenLED</span>() {
    pixels.setPixelColor(<span style="color:#ae81ff">0</span>, pixels.Color(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">150</span>,<span style="color:#ae81ff">0</span>)); <span style="color:#75715e">// Moderately bright green color.
</span><span style="color:#75715e"></span>    pixels.show(); <span style="color:#75715e">// This sends the updated pixel color to the hardware.
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="detail-of-base-made-by-chengxi">Detail of base made by Chengxi</h3>
<p><strong>Hardware</strong></p>
<p><img src="/images/2018-06-03-xlchain/base0.jpg" alt="Base overview">
<em>Base overview</em></p>
<p><img src="/images/2018-06-03-xlchain/base1.jpg" alt="Base inside">
<em>Base inside</em></p>
<p><img src="/images/2018-06-03-xlchain/base2.jpg" alt="Electronic component">
<em>Electronic component</em></p>
<p><img src="/images/2018-06-03-xlchain/base3.jpg" alt="Light guide">
<em>Light guide</em></p>
<p><img src="/images/2018-06-03-xlchain/base4.jpg" alt="Enclosure">
<em>Enclosure</em></p>
<p><strong>Software</strong></p>
<p><img src="/images/2018-06-03-xlchain/base_board.png" alt="Base Schematics Layouts">
<em>Base Schematics Layouts</em></p>
<p>Arduino code of base. Basically initially it lights on white led, if it read RFID tag, it will ring green led for 5 times one by one and then become all green LED.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">/*
</span><span style="color:#75715e">   --------------------------------------------------------------------------------------------------------------------
</span><span style="color:#75715e">   Example sketch/program showing how to read new NUID from a PICC to serial.
</span><span style="color:#75715e">   --------------------------------------------------------------------------------------------------------------------
</span><span style="color:#75715e">    pin layout used:
</span><span style="color:#75715e">    RFID Reader:
</span><span style="color:#75715e">   -----------------------------------
</span><span style="color:#75715e">               MFRC522      Arduino
</span><span style="color:#75715e">               Reader/PCD   Uno/101
</span><span style="color:#75715e">   Signal      Pin          Pin
</span><span style="color:#75715e">   -----------------------------------
</span><span style="color:#75715e">   RST/Reset   RST          9
</span><span style="color:#75715e">   SPI SS      SDA(SS)      10
</span><span style="color:#75715e">   SPI MOSI    MOSI         11 / ICSP-4
</span><span style="color:#75715e">   SPI MISO    MISO         12 / ICSP-1
</span><span style="color:#75715e">   SPI SCK     SCK          13 / ICSP-3
</span><span style="color:#75715e">
</span><span style="color:#75715e">   Neopixel strip:
</span><span style="color:#75715e">   ------------------------------------
</span><span style="color:#75715e">   VCC         VCC          5V
</span><span style="color:#75715e">   CND         GND          GND
</span><span style="color:#75715e">   DIN         DI           8
</span><span style="color:#75715e">*/</span>

<span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;SPI.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;MFRC522.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;Adafruit_NeoPixel.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#define PIXEL_PIN   8    </span><span style="color:#75715e">// Digital IO pin connected to the NeoPixels.
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#define PIXEL_COUNT 5   </span><span style="color:#75715e">//number of pixel on the strip
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">constexpr</span> <span style="color:#66d9ef">uint8_t</span> RST_PIN <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>;     <span style="color:#75715e">// Configurable, see typical pin layout above
</span><span style="color:#75715e"></span><span style="color:#66d9ef">constexpr</span> <span style="color:#66d9ef">uint8_t</span> SS_PIN <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;     <span style="color:#75715e">// Configurable, see typical pin layout above
</span><span style="color:#75715e"></span>
MFRC522 <span style="color:#a6e22e">rfid</span>(SS_PIN, RST_PIN); <span style="color:#75715e">// Instance of the class
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;<span style="color:#75715e">// to delay the connection
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// Parameter 1 = number of pixels in strip,  neopixel stick has 8
</span><span style="color:#75715e">// Parameter 2 = pin number (most are valid)
</span><span style="color:#75715e">// Parameter 3 = pixel type flags, add together as needed:
</span><span style="color:#75715e">//   NEO_RGB     Pixels are wired for RGB bitstream
</span><span style="color:#75715e">//   NEO_GRB     Pixels are wired for GRB bitstream, correct for neopixel stick
</span><span style="color:#75715e">//   NEO_KHZ400  400 KHz bitstream (e.g. FLORA pixels)
</span><span style="color:#75715e">//   NEO_KHZ800  800 KHz bitstream (e.g. High Density LED strip), correct for neopixel stick
</span><span style="color:#75715e"></span>Adafruit_NeoPixel strip <span style="color:#f92672">=</span> Adafruit_NeoPixel(PIXEL_COUNT, PIXEL_PIN, NEO_GRB <span style="color:#f92672">+</span> NEO_KHZ800);

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
  Serial.begin(<span style="color:#ae81ff">9600</span>);
  SPI.begin(); <span style="color:#75715e">// Init SPI bus
</span><span style="color:#75715e"></span>  rfid.PCD_Init(); <span style="color:#75715e">// Init MFRC522
</span><span style="color:#75715e"></span>  strip.begin();
  strip.show(); <span style="color:#75715e">// Initialize all pixels to &#39;off&#39;
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() {
  <span style="color:#75715e">// Looking for RFID tag
</span><span style="color:#75715e"></span>  byte bufferATQA[<span style="color:#ae81ff">2</span>];
  byte bufferSize <span style="color:#f92672">=</span> <span style="color:#66d9ef">sizeof</span>(bufferATQA);
  MFRC522<span style="color:#f92672">::</span>StatusCode result <span style="color:#f92672">=</span> rfid.PICC_RequestA(bufferATQA, <span style="color:#f92672">&amp;</span>bufferSize);

  <span style="color:#75715e">//if tag found, showing running green pixels for 5 times, then steady green display
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> ( result <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
    <span style="color:#66d9ef">if</span> (count <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5</span>) {
      colorWipe(strip.Color(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">0</span>), <span style="color:#ae81ff">5000</span>); <span style="color:#75715e">// green
</span><span style="color:#75715e"></span>      colorWipe(strip.Color(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>), <span style="color:#ae81ff">5000</span>);  <span style="color:#75715e">//running mode
</span><span style="color:#75715e"></span>      count <span style="color:#f92672">++</span>;
    }
    <span style="color:#66d9ef">else</span> {
      colorWipe(strip.Color(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">0</span>), <span style="color:#ae81ff">5000</span>);
    }

    rfid.PCD_StopCrypto1(); <span style="color:#75715e">// Stop encryption on PCD
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">//reopen the antenna to guarantee the reading success
</span><span style="color:#75715e"></span>    rfid.PCD_AntennaOff();
    rfid.PCD_AntennaOn();
  }
  <span style="color:#75715e">//if no tag found, show only one white pixel and if the tag removed, show a running white mode one tiems and then back to one white pixel display.
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">else</span> {
    <span style="color:#66d9ef">if</span> (count <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">5</span>) {
      colorWipe(strip.Color(<span style="color:#ae81ff">127</span>, <span style="color:#ae81ff">127</span>, <span style="color:#ae81ff">127</span>), <span style="color:#ae81ff">5000</span>); <span style="color:#75715e">// white
</span><span style="color:#75715e"></span>    }
    strip.setPixelColor(<span style="color:#ae81ff">0</span>, strip.Color(<span style="color:#ae81ff">127</span>, <span style="color:#ae81ff">127</span>, <span style="color:#ae81ff">127</span>)); <span style="color:#75715e">// bright color.
</span><span style="color:#75715e"></span>    strip.setPixelColor(<span style="color:#ae81ff">1</span>, strip.Color(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)); <span style="color:#75715e">// off
</span><span style="color:#75715e"></span>    strip.setPixelColor(<span style="color:#ae81ff">2</span>, strip.Color(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)); <span style="color:#75715e">// off
</span><span style="color:#75715e"></span>    strip.setPixelColor(<span style="color:#ae81ff">3</span>, strip.Color(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)); <span style="color:#75715e">// off
</span><span style="color:#75715e"></span>    strip.setPixelColor(<span style="color:#ae81ff">4</span>, strip.Color(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)); <span style="color:#75715e">// off
</span><span style="color:#75715e"></span>    strip.show(); <span style="color:#75715e">// This sends the updated pixel color to the hardware.
</span><span style="color:#75715e"></span>    count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
  }
  delay(<span style="color:#ae81ff">500</span>);
}

<span style="color:#75715e">// Fill the dots one after the other with a color
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">colorWipe</span>(<span style="color:#66d9ef">uint32_t</span> c, <span style="color:#66d9ef">uint8_t</span> wait) {
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint16_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> strip.numPixels(); i<span style="color:#f92672">++</span>) {
    strip.setPixelColor(i, c);
    strip.show();
    delay(wait);
  }
}
</code></pre></div>
        
        
<script src="https://utteranc.es/client.js"
        repo="dailydreamer/dailydreamer.github.io"
        issue-term="title"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

      </div>      
    </article>
  </div>

  <script src="/js/zepto.min.js"></script>
<script src="/js/script.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/yaml.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>  
</body>
</html>
